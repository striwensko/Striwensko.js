function readSize(){var e=0,t=0;"number"==typeof window.innerWidth?(e=window.innerWidth,t=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(e=document.body.clientWidth,t=document.body.clientHeight),DIMS.width=e,DIMS.height=t}function easing(e,t,n,o,i,r){if(e==t)return 0;i=isNaN(i)?1:i;var s=(t-e)/n;return r&&(s=e<t?Math.ceil(s):Math.floor(s)),Math.abs(s)<i?Math.abs(e-t)>i?t>e?i:-i:t-e:e<t?Math.min(s,o):Math.max(s,-o)}function addEvent(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}function removeEvent(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)}function RESIZE_DIMS(e,t,n,o,i,r,s){var a=e,u=t,p=n,c=o,d=u,l=a;"VIEW_ALL"==i&&(d=c,(l=a*c/u)>p&&(d=u*p/a,l=p)),"FILL_ALL"==i&&(d=c,(l=a*c/u)<p&&(d=u*p/a,l=p)),0==s&&(l>a||d>u)&&(d=u,l=a),l=Math.round(l),d=Math.round(d);var h=-Math.round((l-p)/2),v=-Math.round((d-c)/2),E=r||"C";return"T"==E.slice(0,1)&&(v=0),"B"==E.slice(0,1)&&(v=c-d),"L"!=E.slice(0,1)&&"L"!=E.slice(1,2)||(h=0),"R"!=E.slice(0,1)&&"R"!=E.slice(1,2)||(h=p-l),{width:l,height:d,x:h,y:v}}function ADD_EVENT_DISPATCHER(e){Object.extend(e,Event_Dispatcher)}Object.extend=function(e,t){for(var n in t)e[n]=t[n];return e},Object.merge=function(e,t){for(var n in t)e[n]&&e[n].constructor==Object&&t[n].constructor==Object?Object.merge(e[n],t[n]):e[n]=t[n]},Event={},Event.ERROR="error",Event.CANCEL="cancel",Event.OPEN="open",Event.CLOSE="close",Event.COMPLETE="onComplete",Event.CHANGE="onChange",Event.MOVE="MOVE",Event.START="START",Event.STOP="STOP",Event.RESIZE="resize",Event.SELECT="select",Event.RENDER="render",Event.REFRESH="refresh",Event.STATE_CHANGE="stateChange",Event.SOUND_COMPLETE="soundComplete",Event.FOCUS_OUT="focusOut",Event.FOCUS_IN="focusIn",Event.REMOVE="remove",Event.PROGRESS="progress",Event.UPLOAD="upload",Event.REMOVE="remove",Event.DELETE="delete";var DIMS={};addEventSimple=addEvent,removeEventSimple=removeEvent;var Event_Dispatcher={};Event_Dispatcher.all=function(e){},Event_Dispatcher.addEventListener=function(e,t,n){this.events||(this.events={}),this.events[e]||(this.events[e]=new Array),n=n||this,this.events[e].push({listener:t,scope:n})},Event_Dispatcher.dispatchEvent=function(e,t){if(this.events||(this.events={}),this.events[e])for(var n=this.events[e],o=0;o<n.length;o++){var i=n[o].listener,r=n[o].scope;"function"==(typeof i).toString()?r?(r.eventRecieverFunction=i,r.eventRecieverFunction({currentTarget:this,type:e,data:t})):i({currentTarget:this,type:e,data:t}):r[i]({currentTarget:this,type:e,data:t})}},Event_Dispatcher.removeEventListener=function(e,t,n){if(!this.events)return!1;if(!this.events[e])return!1;for(var o=this.events[e],i=0;i<o.length;i++)t==o[i].listener&&n==o[i].scope&&o.splice(i,1)},Event_Dispatcher._addEventListener=Event_Dispatcher.addEventListener,Event_Dispatcher._dispatchEvent=Event_Dispatcher.dispatchEvent,Event_Dispatcher._removeEventListener=Event_Dispatcher.removeEventListener,Browser={},Browser.urlParams=function(){for(var e=window.location.href.split("?").pop().split("&"),t={},n=0;n<e.length;n++){var o=e[n].split("=");t[o[0]]=o[1]}return t},Browser.Router={},Browser.Router.url=null,Browser.Router.routes=[],Browser.Router.optionalParam=/\((.*?)\)/gim,Browser.Router.namedParam=/(\(\?)?:\w+;/gim,Browser.Router.splatParam=/\*\w+/gim,Browser.Router.escapeRegExp=/[\-{}\[\]+?.,\\\^$|#\s]/gim,ADD_EVENT_DISPATCHER(Browser.Router),Browser.Router.start=function(){var e=this;window.onpopstate=function(){e.onRoute()},this.onRoute()},Browser.Router.onRoute=function(){var e=document.location.toString();if(this.url!=e){var t=e.split("#");t=t.length>1?t.pop():"",this.url=e,this.detectRoute(t)}},Browser.Router.supportSlashHistory=function(){return!(!window.history||void 0===window.history.pushState)},Browser.Router.navigate=function(e,t,n){if(this.supportSlashHistory()){var o=window.location.toString().split("#")[0];o=1==e.split("=").length?o+"#"+e:o+"?"+e,this.url!=o&&(this.url=o,0==n?window.history.replaceState(t,"",o):window.history.pushState(t,"",o)),this.detectRoute(e)}},Browser.Router.detectRoute=function(e){for(var t=0;t<this.routes.length;t++)if(e.match(this.routes[t].regExp)){var n=this.routes[t].regExp.exec(e).slice(1),o=this.routes[t].paramNames,i={};if(o)for(var r=0;r<o.length;r++){var s=o[r].split(":");2==s.length?(i[s[0]]||(i[s[0]]={}),i[s[0]][s[1]]=n[r]):i[o[r]]=n[r]}this.dispatchEvent(Event.CHANGE,{path:e,data:this.routes[t].data,params:i});break}},Browser.Router.addRoute=function(e,t){var n={};n.path=e,n.data=t;var o=(e=(e=e.replace(/\:/gim,"___")).replace(/\{/gim,":").replace(/\}/gim,";")).match(Browser.Router.namedParam);if(n.paramNames=o,o)for(var i=0;i<o.length;i++)o[i]=o[i].replace(":","").replace(";",""),o[i]=o[i].replace("___",":");n.regExp=this.translatePathToRegExp(e),e.split("{").length>1?this.routes.push(n):this.routes.unshift(n)},Browser.Router.translatePathToRegExp=function(e){return e=e.replace(Browser.Router.escapeRegExp,"\\$&"),e=e.replace(Browser.Router.optionalParam,"(?:$1)?"),e=e.replace(Browser.Router.namedParam,function(e,t){return t?e:"([^/]+)"}),e=e.replace(Browser.Router.splatParam,"(.*?)"),new RegExp("^"+e+"$")},Browser.getSize=function(){var e=0,t=0;return"number"==typeof window.innerWidth?(e=window.innerWidth,t=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(e=document.body.clientWidth,t=document.body.clientHeight),Browser.width=e,Browser.height=t,{width:e,height:t}},Browser.UI={},Browser.UI.popupize=function(e,t,n){e.popup={},e.popup.mouseDownFN=function(o){for(var i=o.target;i;){if(i==e||i==t)return!0;i=i.parentNode}t.style.display="none",n&&e.classList.remove(n),removeEventSimple(document,"mousedown",e.popup.mouseDownFN)},e.popup.close=function(){t.style.display="none",n&&e.classList.remove(n),removeEventSimple(document,"mousedown",e.popup.mouseDownFN)},e.popup.toggle=function(o){for(var i=o.target;i;){if(i==t)return!0;i=i.parentNode}t.style.display="none"==t.style.display?"":"none",""==t.style.display?(n&&!e.classList.contains(n)&&n&&e.classList.add(n),addEventSimple(document,"mousedown",e.popup.mouseDownFN)):(n&&e.classList.remove(n),removeEventSimple(document,"mousedown",e.popup.mouseDownFN))},e.onclick=e.popup.toggle},ImageUploader=function(e){this.fileInput=document.createElement("input"),this.fileInput.setAttribute("type","file"),this.fileInput.setAttribute("accept","image/*"),this.fileInput.setAttribute("onchange","this.dragUploader.processFiles(this.files)"),this.fileInput.dragUploader=this,document.body.appendChild(this.fileInput),this.fileInput.style.position="fixed",this.fileInput.style.top="-300px",this.upload=e&&e.upload,ADD_EVENT_DISPATCHER(this)},ImageUploader.prototype.browse=function(e){console.log(e),this.fileInput.click(e)},ImageUploader.prototype.imageReady=function(e,t){this.data=e,console.log("fileName",t),this.dispatchEvent(Event.COMPLETE,{fileName:t}),this.fileInput.setAttribute("onchange",""),this.fileInput.dragUploader=null,document.body.removeChild(this.fileInput),this.fileInput=document.createElement("input"),this.fileInput.setAttribute("type","file"),this.fileInput.setAttribute("onchange","this.dragUploader.processFiles(this.files)"),this.fileInput.dragUploader=this,document.body.appendChild(this.fileInput),this.fileInput.style.position="fixed",this.fileInput.style.top="-300px"},ImageUploader.prototype.onProgress=function(e){this.progress=e.loaded/e.total,this.dispatchEvent(Event.PROGRESS)},ImageUploader.prototype.startUpload=function(e){if(this.upload){var t=this,n=new FormData;n.append("file",e);var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4==o.readyState&&200==o.status)try{var e=JSON.parse(this.responseText);t.dispatchEvent(Event.UPLOAD,e)}catch(e){t.dispatchEvent(Event.UPLOAD)}},o.upload.addEventListener("progress",function(e){t.onProgress(e)},!1),o.open("POST",this.upload),o.send(n)}},ImageUploader.prototype.processFiles=function(e){var t=e[0];if(t){var n=t.name,o=n.split(/\./).pop().toLowerCase();if(("png"==o||"jpg"==o||"gif"==o||"jpeg"==o)&&"undefined"!=typeof FileReader){var i=this,r=new FileReader;r.onload=function(e){i.startUpload(t),i.imageReady(e.target.result,n)},r.readAsDataURL(t)}}};
function TimeLine(t,i){this.duration=t,this.direction=1,this._position=0,this.status="STOP",this.startTime=0,this.interval=i,this.intervalObj,this.data={},this.events={},ADD_EVENT_DISPATCHER(this);var e=this;this.REQ_ANIMATION=function(t){e.update()}}TimeLine.prototype.play=function(){if(1==this.direction&&this._position==this.duration||-1==this.direction&&0==this._position);else{if(this.startTime=(new Date).getTime()-this._position,"PLAY"!=this.status){var t=this,i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame;if(i)i(this.REQ_ANIMATION);else{t=this;this.intervalObj=setInterval(function(){t.update()},this.interval)}}this.status="PLAY"}},TimeLine.prototype.pause=function(){this.status="PAUSE",clearInterval(this.intervalObj)},TimeLine.prototype.stop=function(){this.status="STOP",clearInterval(this.intervalObj)},Object.defineProperty(TimeLine.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t,this.startTime=(new Date).getTime()-this._position},configurable:!0}),TimeLine.prototype.update=function(){if(Date.now||(Date.now=function(){return(new Date).getTime()}),"PLAY"!=this.status)return!1;var t=Date.now();if(1==this.direction)this._position=t-this.startTime,this._position=Math.min(this.duration,this._position),this._position==this.duration?(this.status="STOP",clearInterval(this.intervalObj),this.dispatchEvent(Event.COMPLETE),this.onComplete&&this.onComplete()):"PLAY"==this.status&&(i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame)&&i(this.REQ_ANIMATION);else if(this._position=Math.max(2*this._position-(t-this.startTime),0),this.startTime=t-this._position,0==this._position)this.status="STOP",clearInterval(this.intervalObj),this.dispatchEvent(Event.COMPLETE),this.onComplete&&this.onComplete();else if("PLAY"==this.status){var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame;i&&i(this.REQ_ANIMATION)}this.dispatchEvent(Event.CHANGE)},TimeLine.prototype.getTime=function(t,i,e){var n=Math.min(Math.max(this._position-t,0),i);return null!=e?e(n,0,1,i):this.easeInOut(n,0,1,i)},TimeLine.prototype.easeInOut=function(t,i,e,n){return-e/2*(Math.cos(Math.PI*t/n)-1)+i},TimeLine.prototype.easeInOutPos=function(t,i,e,n){return Math.acos(2/e*-(t-i)+1)*n/Math.PI},TimeLine.applyMatrix=function(t,i){if(t=t.constructor==Array?t:[t],!i){for(p=0;p<t.length;p++)(d=t[p]).style.transform="",d.style.MozTransform="",d.style.WebkitTransform="",d.style.msTransform="",d.style.OTransform="";return!1}var e=i.hasOwnProperty("scale")?i.scale:1,n=i.hasOwnProperty("scaleX")?i.scaleX*e:e,o=i.hasOwnProperty("scaleY")?i.scaleY*e:e,s=(i.hasOwnProperty("rotation")?i.rotation:0)*(Math.PI/180),a=i.hasOwnProperty("x")?i.x:0,r=i.hasOwnProperty("y")?i.y:0,l=i.hasOwnProperty("opacity")?i.opacity:1;if(i.hasOwnProperty("radius")&&i.hasOwnProperty("angle")){var h=i.radius,m=i.angle;a=Math.round(h*Math.cos(m*Math.PI/180)*100)/100+a,r=Math.round(h*Math.sin(m*Math.PI/180)*100)/100+r}for(var c="matrix("+[n*Math.cos(s),-o*Math.sin(s),o*Math.sin(s),o*Math.cos(s),a,r].join(",")+")",p=0;p<t.length;p++){var u=!1,d=t[p];d.animation||(d.animation={}),d.animation.x!=a&&(d.animation.x=a,u=!0),d.animation.y!=r&&(d.animation.y=r,u=!0),d.animation.scaleX!=n&&(d.animation.scaleX=n,u=!0),d.animation.scaleY!=o&&(d.animation.scaleY=o,u=!0),d.animation.rotation!=i.rotation&&(d.animation.rotation=i.rotation,u=!0),i.hasOwnProperty("opacity")&&d.animation.opacity!=l&&(d.style.opacity=l,d.animation.opacity=l),u&&(d.style.transform=c,d.style.MozTransform=c,d.style.WebkitTransform=c,d.style.msTransform=c,d.style.OTransform=c)}};var Scroll={};Scroll.end,Scroll.timeLine=new TimeLine(500,33),Scroll.timeLine.addEventListener(Event.CHANGE,"refresh",Scroll),Scroll.go=function(t,i,e){Scroll.element=i,Scroll.start=Scroll.element?i.scrollTop:e||document.body.scrollTop||document.documentElement.scrollTop,t.nodeType&&(t=t.getBoundingClientRect().top+Scroll.start),Scroll.end=t,console.log(Scroll.start,Scroll.end),Scroll.timeLine.duration=Math.min(Math.max(200,1.5*Math.abs(Scroll.end-Scroll.start)),1500),Scroll.timeLine.position=0,Scroll.timeLine.play()},Scroll.refresh=function(){var t=Scroll.start+(Scroll.end-Scroll.start)*Scroll.timeLine.getTime(0,Scroll.timeLine.duration);Scroll.element?Scroll.element.scrollTop=t:(document.body.scrollTop=t,document.documentElement.scrollTop=t)};
function JSON_Loader(){this.request,this.url,this.isReady=!1,ADD_EVENT_DISPATCHER(this)}JSON_Loader.prototype.abort=function(){this.request&&this.request.abort()},JSON_Loader.prototype.send=function(e){this.load(e.url,e.data,e.contentType||null,e.requestMethod||null,e.headers||null)},JSON_Loader.prototype.load=function(e,t,s,r,i){this.url=e,this.data=null,this.isReady=!1;var a=this;if(this.request&&this.request.abort(),window.XMLHttpRequest)this.request=new XMLHttpRequest,this.request.overrideMimeType&&this.request.overrideMimeType("text/xml");else if(window.ActiveXObject)try{this.request=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{this.request=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}if(!this.request)return alert("Giving up :( Cannot create an XMLHTTP instance"),!1;if(this.request.onreadystatechange=function(e){var t=!1,s=e.target;if(4==s.readyState)if(400==s.status)try{r=unescape(escape(this.responseText).replace(/%0A/gim,"").replace(/%0D/gim,""));a.data=JSON.parse(r),a.dispatchEvent(Event.ERROR)}catch(e){console.log(e),a.dispatchEvent(Event.ERROR)}else if(200==s.status||"file:"===window.location.protocol&&0==s.status){try{var r=unescape(escape(this.responseText).replace(/%0A/gim,"").replace(/%0D/gim,""));a.data=JSON.parse(r)}catch(e){t=!0}t?(console.log("error:"+a.url+","+t),console.log("string:"+r),a.dispatchEvent(Event.CANCEL)):(a.isReady=!0,a.dispatchEvent(Event.COMPLETE))}},t){if(this.request.open(r||"POST",this.url,!0),s?this.request.setRequestHeader("Content-Type",s):this.request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i)for(n=0;n<i.length;n++)console.log(i[n].name,i[n].value),this.request.setRequestHeader(i[n].name,i[n].value);this.request.send(t)}else{if(this.request.open(r||"GET",this.url,!0),s&&this.request.setRequestHeader("Content-Type",s),i)for(var n=0;n<i.length;n++)this.request.setRequestHeader(i[n].name,i[n].value);this.request.send(null)}};
DragTouch=function(){this.startX=0,this.endY=0,ADD_EVENT_DISPATCHER(this);var t=this;this.__moveFN=function(i){t.moveFN(i),i.preventDefault()},this.__endFN=function(i){t.end(i),i.preventDefault()}},DragTouch.ZOOM="zoom",DragTouch.prototype.start=function(t){return this.startX=t.touches?t.touches[0].clientX:t.clientX,this.startY=t.touches?t.touches[0].clientY:t.clientY,this.moveX=0,this.moveY=0,this.endX=this.startX,this.endY=this.startY,this.zoom=null,this.dispatchEvent(Event.START),this.HTML_DIV=null,t.preventDefault(),"touchstart"==t.type?(addEventSimple(document,"touchmove",this.__moveFN),addEventSimple(document,"touchend",this.__endFN)):"mousedown"==t.type&&(addEventSimple(document,"mousemove",this.__moveFN),addEventSimple(document,"mouseup",this.__endFN)),!1},DragTouch.prototype.startDrag=function(t,i,e){return this.isActive?!1:(this.isActive=!0,this.hasMove=!1,this.start(t),e=e||{},i?(this.HTML_DIV=i,this.divX_Start=this.HTML_DIV.offsetLeft,this.divY_Start=this.HTML_DIV.offsetTop,this.position={x:this.divX_Start,y:this.divY_Start}):this.position={x:0,y:0},this.leftLimit=e.left!=e.undefined?e.left:null,this.topLimit=e.top!=e.undefined?e.top:null,this.rightLimit=e.right!=e.undefined?e.right:null,this.bottomLimit=e.bottom!=e.undefined?e.bottom:null,this.moveFree=null==this.leftLimit&&null==this.topLimit&&null==this.rightLimit&&null==this.bottomLimit,this.move={x:0,y:0},!0)},DragTouch.prototype.moveFN=function(t){if(t.touches){if(2==t.touches.length){var i;return this.zoom?i=Math.sqrt(Math.pow(t.touches[0].clientX-t.touches[1].clientX,2)+Math.pow(t.touches[0].clientY-t.touches[1].clientY,2)):(this.zoom=Math.sqrt(Math.pow(t.touches[0].clientX-t.touches[1].clientX,2)+Math.pow(t.touches[0].clientY-t.touches[1].clientY,2)),i=Math.sqrt(Math.pow(t.touches[0].clientX-t.touches[1].clientX,2)+Math.pow(t.touches[0].clientY-t.touches[1].clientY,2))),this.dispatchEvent(DragTouch.ZOOM,{zoom:i-this.zoom}),!1}t.touches.length>=2&&this.end(t)}if(!this.hasMove){var e=t.touches?t.touches[0].clientX:t.clientX,s=t.touches?t.touches[0].clientY:t.clientY;t.touches?(e-this.startX)*(e-this.startX)+(s-this.startY)*(s-this.startY)>100&&(this.startX=e,this.startY=s,this.moveX=0,this.moveY=0,this.endX=this.startX,this.endY=this.startY,this.hasMove=!0):(e!=this.startX||s!=this.startY)&&(this.hasMove=!0)}if(!this.hasMove)return!1;if(this.endX=t.touches?t.touches[0].clientX:t.clientX,this.endY=t.touches?t.touches[0].clientY:t.clientY,this.moveX=this.endX-this.startX,this.moveY=this.endY-this.startY,this.HTML_DIV){var h=this.divX_Start+this.moveX,o=this.divY_Start+this.moveY;1!=this.moveFree?(null!=this.rightLimit&&null!=this.leftLimit&&(h=Math.min(h,this.rightLimit),h=Math.max(h,this.leftLimit),this.HTML_DIV.style.left=h+"px"),null!=this.bottomLimit&&null!=this.topLimit&&(o=Math.min(o,this.bottomLimit),o=Math.max(o,this.topLimit),this.HTML_DIV.style.top=o+"px")):(this.HTML_DIV.style.left=h+"px",this.HTML_DIV.style.top=o+"px"),this.position={x:h,y:o},this.move={x:h-this.divX_Start,y:o-this.divY_Start}}else this.move={x:this.moveX,y:this.moveY},null!=this.rightLimit&&null!=this.leftLimit&&(this.move.x=Math.min(this.move.x,this.rightLimit),this.move.x=Math.max(this.move.x,this.leftLimit)),null!=this.bottomLimit&&null!=this.topLimit&&(this.move.y=Math.min(this.move.y,this.bottomLimit),this.move.y=Math.max(this.move.y,this.topLimit)),this.position=this.move;this.dispatchEvent(Event.MOVE,{clientX:this.endX,clientY:this.endY,move:this.move,position:this.position})},DragTouch.prototype.end=function(t){this.isActive=!1,"touchend"==t.type?(removeEventSimple(document,"touchmove",this.__moveFN),removeEventSimple(document,"touchend",this.__endFN)):"mouseup"==t.type&&(removeEventSimple(document,"mousemove",this.__moveFN),removeEventSimple(document,"mouseup",this.__endFN));var i=t.touches?t.touches.length>0?t.touches[0].clientX:this.endX:t.clientX,e=t.touches?t.touches.length>0?t.touches[0].clientY:this.endY:t.clientY;t={clientX:i,clientY:e,move:this.move,position:this.positionY},this.dispatchEvent(Event.STOP,t),document.getElementsByTagName("body")[0].style.userSelect="",document.getElementsByTagName("body")[0].style.webkitUserSelect="",document.getElementsByTagName("body")[0].style.MozUserSelect="",document.getElementsByTagName("body")[0].setAttribute("unselectable","off")};
var Require=function(e,i,t,r){Require.addItem(e,i,t,r)};Require.length=0,Require.dictionary={},Require.queue=[],Require.loading=[],Require.loaded=0,Require.SIZE=3,Require.onReady=function(){},Require.images={},Require.start=function(){Require.loader||(Require.loader=document.createElement("div"),Require.loader.className="app-loader",Require.loader.barHolder=document.createElement("div"),Require.loader.barHolder.className="bar-holder",Require.loader.appendChild(Require.loader.barHolder),Require.loader.bar=document.createElement("div"),Require.loader.bar.className="bar",Require.loader.barHolder.appendChild(Require.loader.bar)),Require.next()},Require.updateLoader=function(){var e=Require.loaded/Require.length;Require.loader.bar.style.width=100*e+"%"},Require.next=function(){for(var e=0;e<this.queue.length;e++){for(var i=this.queue[e].items,t=i.length-1;t>=0;t--)if(!this.isLoading(i[t])&&!this.hasBranches(i[t]))return this.load(i[t]),this.loading.length<Require.SIZE&&this.next(),!0;if(0==i.length&&!this.isLoading(this.queue[e].url))return this.load(this.queue[e].url),this.loading.length<Require.SIZE&&this.next(),!0}return!1},Require.hasBranches=function(e){for(var i=0;i<this.queue.length;i++)if(this.queue[i].url==e)return!0;return!1},Require.isLoading=function(e){for(var i=0;i<this.loading.length;i++)if(this.loading[i]==e)return!0;return!1},Require.load=function(e){e.split(".png").length>1||e.split(".jpg").length>1||e.split(".jpeg").length>1||e.split(".gif").length>1||e.split(".svg").length>1?this.loadImage(e):e.split(".js").length>1?this.loadJs(e):e.split(".css").length>1&&this.loadCss(e)},Require.loadImage=function(e){console.log("image",e);var i=e;i.split("?").length>1?i+="&time="+(new Date).getTime():i+="?time="+(new Date).getTime();var t=new Image;t.src=i,t.onload=function(){console.log("load",e),Require.onload(this,e)},t.onerror=function(){Require.onload(this,e)},Require.images[e]=t,Require.loading.push(e)},Require.getImage=function(e){return Require.images[e]},Require.loadJs=function(e){var i=e;i.split("?").length>1?i+="&time="+(new Date).getTime():i+="?time="+(new Date).getTime();var t=document.createElement("script");t.setAttribute("src",i),t.setAttribute("type","text/javascript"),t.onload=function(){Require.onload(this,e)},t.onerror=function(){Require.onload(this,e)},document.head.appendChild(t),Require.loading.push(e)},Require.loadCss=function(e){var i=e;i.split("?").length>1?i+="&time="+(new Date).getTime():i+="?time="+(new Date).getTime();var t=document.createElement("link");t.setAttribute("href",i),t.setAttribute("rel","stylesheet"),t.onload=function(){Require.onload(this,e)},t.onerror=function(){Require.onload(this,e)},document.head.appendChild(t),Require.loading.push(e)},Require.onload=function(e,i){this.dictionary[i].load=!0;for(var t=this.loading.length-1;t>=0;t--)this.loading[t]==i&&this.loading.splice(t,1);for(var r=this.queue.length-1;r>=0;r--)if(this.queue[r].url==i)this.queue[r].fn&&this.queue[r].fn.constructor==Function&&(this.queue[r].loaded++,this.queue[r].progress&&this.queue[r].progress(this.queue[r].loaded/this.queue[r].length),this.queue[r].fn()),this.queue.splice(r,1);else{var u=this.queue[r].items;console.log(JSON.stringify(this.queue));for(var n=u.length-1;n>=0;n--)console.log(u[n],i),u[n]==i&&(this.queue[r].loaded++,this.queue[r].progress&&this.queue[r].progress(this.queue[r].loaded/this.queue[r].length),u.splice(n,1))}Require.next(),Require.loaded++,Require.updateLoader()},Require.addItem=function(e,i,t,r){i=i||[],this.dictionary[e]||Require.length++,this.dictionary[e]={load:!1,items:i,length:i.length+1};for(var u=0;u<i.length;u++)this.dictionary[i[u]]||(Require.length++,this.dictionary[i[u]]={load:!1,items:[]});Require.queue.push({url:e,items:i,fn:t,progress:r,loaded:0,length:i.length+1})};
function Track(t){var a=this;this.settings=t,this.audio=document.createElement("audio"),this.gain=t.gain||1,this.time=0,this.duration=0,this.progress=0,this.audio.ontimeupdate=function(){isNaN(this.duration)||(a.duration=this.duration),a.time=this.currentTime,a.dispatchEvent(Event.CHANGE)},this.audio.oncanplaythrough=function(){a.progress=1,a.dispatchEvent("loadProgress")},this.audio.onprogress=function(t){isNaN(this.duration)||(a.duration=this.duration),this.buffered.length>0&&(a.progress=this.buffered.end(this.buffered.length-1)/this.duration),a.dispatchEvent("loadProgress")},this.loop=t.loop>0&&t.loop,this.m4a=!(!this.audio.canPlayType||!this.audio.canPlayType('audio/mp4; codecs="mp4a.40.2"').replace(/no/,"")),this.mp3=!(!this.audio.canPlayType||!this.audio.canPlayType("audio/mpeg;").replace(/no/,"")),this.ogg=!(!this.audio.canPlayType||!this.audio.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,"")),this.mp3&&t.mp3?this.audio.src=t.mp3:this.ogg&&t.ogg?this.audio.src=t.ogg:this.m4a&&t.m4a&&(this.audio.src=t.m4a),this.audio.src&&this.audio.load(),this.disable=!1,this.volume=(t.volume||.5)*this.gain,this.audio.volume=this.volume,this.status=Track.STOP,this.isReady=!1,addEvent(this.audio,"canplaythrough",function(t){a.ready(t)}),addEvent(this.audio,"ended",function(t){a.onEnd(t)}),ADD_EVENT_DISPATCHER(this)}Track.prototype.load=function(t){this.mp3&&t.mp3?this.audio.src=t.mp3:this.ogg&&t.ogg?this.audio.src=t.ogg:this.m4a&&t.m4a&&(this.audio.src=t.m4a),this.audio.load()},Track.prototype.cancel=function(){this.audio.src="",this.audio.load()},Track.prototype.getTimeString=function(){var t=Math.floor(this.time),a=t%60,i=Math.floor(t/60);return a=(a<10?"0":"")+a,(i=(i<10?"0":"")+i)+":"+a},Track.prototype.getTime=function(){return this.time},Track.PLAY="PLAY",Track.PAUSE="PAUSE",Track.STOP="STOP",Track.prototype.ready=function(t){this.isReady=!0,this.dispatchEvent("ready")},Track.prototype.onEnd=function(t){if(console.log(t),this.loop&&this.status==Track.PLAY){var a=this;this.timeout=setTimeout(function(){a.play()},this.loop)}else this.status=Track.STOP;this.dispatchEvent(Event.COMPLETE)},Track.prototype.getVolume=function(){return this.volume},Track.prototype.setVolume=function(t){this.volume=t,this.audio.volume=this.volume*this.gain},Track.prototype.play=function(){console.log("Track.Play()"),this.audio.play(),this.status=Track.PLAY,this.dispatchEvent(Event.STATE_CHANGE)},Track.prototype.pause=function(){this.audio.pause(),this.status=Track.PAUSE,this.dispatchEvent(Event.STATE_CHANGE)},Track.prototype.stop=function(){this.audio.pause(),this.isReady&&(this.audio.currentTime=0),clearTimeout(this.timeout),this.status=Track.STOP,this.dispatchEvent(Event.STATE_CHANGE)},Track.Buttons=[],Track.play=function(t,a,i){if(i.icon=i.getElementsByClassName("fa")[0],i.track||(i.track=new Track({mp3:t,autoPlay:!1,volume:a}),i.track.addEventListener(Event.COMPLETE,"onSoundComplete",i),i.track.addEventListener(Event.STATE_CHANGE,"onStatusChange",i),i.onSoundComplete=function(){for(var t=0;t<Track.Buttons.length;t++)Track.Buttons[t]==i&&Track.Buttons.splice(t,1);i.icon.className="PLAY"==i.track.status?"fa fa-pause":"fa fa-play"},i.onStatusChange=function(){i.icon.className="PLAY"==i.track.status?"fa fa-pause":"fa fa-play"}),"PLAY"==i.track.status)i.track.pause();else{for(i.track.play();Track.Buttons.length>0;)Track.Buttons.pop().track.stop();Track.Buttons.push(i)}};